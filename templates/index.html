{% extends 'base.html' %}
{% load static %}


{% block title %}
    Home Page
{% endblock title %}

{% block content %}
<div class="container">

    <!-- 搜索栏 -->
    <div class="row" style="margin-top:20px">
        <div class="col-auto mr-auto">
            <form class="form-inline" >
                <label class="sr-only">content</label>
                <input type="text"
                    class="form-control mb-2 mr-sm-2"
                    name="search"
                    placeholder="Search"
                    required
                >
            </form>
        </div>
    </div>

    <!-- 搜索提示语 -->
    {% if search %}
        {% if articles %}
            <h4><span style="color: red">"{{ search }}"</span>result：</h4>
            <hr>
        {% else %}
            <h4>no<span style="color: red">"{{ search }}"</span>result。</h4>
            <hr>
        {% endif %}
    {% endif %}

    <div>
        <form>
            <select id="selectLeo" class="form-control form-control-placeholder" onchange="showSelectedValue()">
                <option  value="-1" disabled selected hidden>Filter</option>
                <option  value="0" style="color: black;">Coffee</option>
                <option value="1" style="color: black;">Mexican</option>
                <option value="2" style="color: black;">Italian</option>
                <option value="3" style="color: black;">Clear</option>
            </select>
        </form>
    </div>

    <!-- 列表循环 -->
    <div class="row mt-2">
        {% for article in articles %}
            {% if article.avatar %}
                <div class="col-3">
                    <img src="{{ article.avatar.url }}"
                         alt="avatar"
                         style="max-width:100%; border-radius: 20px"
                    >
                </div>
            {% endif %}

            <div class="col">

                <h4>
                    <b>
                        <a href="#"
                           style="color: black;"
                        >
                            {{ article.title }}
                        </a>
                    </b>
                </h4>
                <div>
                    <p style="color: gray;">
                        {{ article.body|slice:'100' }}...
                    </p>
                </div>
<!--                <p>-->
<!--                    <span>-->
<!--                        <i class="fas fa-eye" style="color: lightskyblue;"></i>-->
<!--                        {{ article.total_views }}&nbsp;&nbsp;&nbsp;-->
<!--                    </span>-->
<!--                    <span>-->
<!--                        <i class="fas fa-comments" style="color: yellowgreen;"></i>-->
<!--                        {{ article.comments.count }}&nbsp;&nbsp;&nbsp;-->
<!--                    </span>-->
<!--                    <span>-->
<!--                        <i class="fas fa-clock" style="color: pink;"></i>-->
<!--                    </span>-->
<!--                </p>-->
                <span>
                    {% for tag in article.tags.all %}
                        <a href="#" class="badge badge-secondary">
                            {{ tag }}
                        </a>
                    {% endfor %}
                </span>
            </div>
            <hr style="width: 100%;"/>
        {% endfor %}
    </div>

    <script>
        function showSelectedValue(){
            var foodType = document.getElementById("selectLeo");
            var selectedText = foodType.options[foodType.selectedIndex].text;
            var newUrl = "{% url 'index' %}?search=" + selectedText;

            window.location.href = newUrl;
        }
    </script>

</div>
{% endblock content %}